
<view class="container">

<!-- ===== 发布者页面 (userRole==2) ===== -->
<view wx:if="{{userRole == 2}}">

  <!-- 顶部蓝色背景区域 -->
  <view class="top-blue-bg">
    <view class="user-header">
      <view class="avatar-wrap" bindtap="bindGetUserInfo">
        <image wx:if="{{isuser && userinfo.avatarUrl}}" src="{{userinfo.avatarUrl}}" class="avatar-img"></image>
        <image wx:else src="../../imgs/icon/user@default.png" class="avatar-img"></image>
      </view>
      <view class="user-info-area" bindtap="bindGetUserInfo">
        <view class="nickname">{{isuser ? userinfo.nickname : '登录/注册>'}}</view>
        <view class="verify-tag {{isVerified ? 'verified' : 'unverified'}}">{{isVerified ? '已实名' : '未实名'}}</view>
      </view>
    </view>

    <view class="asset-bar">
      <view class="asset-left">
        <image src="../../imgs/icon/coin_color.png" class="asset-icon"></image>
        <text class="asset-label">章鱼币</text>
        <text class="asset-value">{{coinBalance}}</text>
        <text class="asset-unit">个</text>
      </view>
      <view class="asset-right">
        <view class="asset-btn" bindtap="toRecharge">充值</view>
        <view class="asset-btn asset-btn-outline" bindtap="toRecommend">推荐</view>
      </view>
    </view>
  </view>

  <!-- 功能网格 4列x2行 -->
  <view class="func-grid">
    <view class="func-item" bindtap="toMyPublished">
      <image src="../../imgs/icon/my_published.png"></image>
      <text>我的发布</text>
    </view>
    <view class="func-item" bindtap="toPinTop">
      <image src="../../imgs/icon/my_pintop.png"></image>
      <text>发布置顶</text>
    </view>
    <view class="func-item" bindtap="toSigninList">
      <image src="../../imgs/icon/my_signin.png"></image>
      <text>签到表</text>
    </view>
    <view class="func-item" bindtap="toChatList">
      <image src="../../imgs/icon/my_groupchat.png"></image>
      <text>我的群聊</text>
    </view>
    <view class="func-item" bindtap="toSpread">
      <image src="../../imgs/icon/my_spread.png"></image>
      <text>加急扩散</text>
    </view>
    <view class="func-item" bindtap="toMyComment">
      <image src="../../imgs/icon/my_rating.png"></image>
      <text>评价</text>
    </view>
    <view class="func-item" bindtap="toGuide">
      <image src="../../imgs/icon/my_guide.png"></image>
      <text>使用说明</text>
    </view>
  </view>

  <!-- 间隔 -->
  <view class="section-gap"></view>

  <!-- 菜单列表 -->
  <view class="menu-list">
    <view class="menu-item" bindtap="toAgreement">
      <image src="../../imgs/icon/menu_agreement.png" class="menu-icon"></image>
      <text class="menu-text">用户协议</text>
      <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
    </view>
    <view class="menu-item" bindtap="toPrivacy">
      <image src="../../imgs/icon/menu_privacy.png" class="menu-icon"></image>
      <text class="menu-text">隐私协议</text>
      <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
    </view>
    <view class="menu-item" bindtap="toCooperate">
      <image src="../../imgs/icon/menu_cooperate.png" class="menu-icon"></image>
      <text class="menu-text">找我合作</text>
      <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
    </view>
    <view class="menu-item">
      <button open-type="contact" class="menu-contact-btn">
        <image src="../../imgs/icon/menu_service.png" class="menu-icon"></image>
        <text class="menu-text">联系客服</text>
        <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
      </button>
    </view>
    <view class="menu-item" bindtap="toAccountSecurity">
      <image src="../../imgs/icon/manage.png" class="menu-icon"></image>
      <text class="menu-text">账号与安全</text>
      <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
    </view>
  </view>

  <!-- 间隔 -->
  <view class="section-gap"></view>

  <!-- 退出登录 -->
  <view class="logout-section">
    <view class="logout-btn" bindtap="logout">退出登录</view>
  </view>

</view>


<!-- ===== 报名者页面 (userRole!=2) ===== -->
<view wx:else>

  <!-- 顶部蓝色背景区域 -->
  <view class="top-blue-bg">
    <view class="user-header">
      <view class="avatar-wrap" bindtap="bindGetUserInfo">
        <image wx:if="{{isuser && userinfo.avatarUrl}}" src="{{userinfo.avatarUrl}}" class="avatar-img"></image>
        <image wx:else src="../../imgs/icon/user@default.png" class="avatar-img"></image>
      </view>
      <view class="user-info-area" bindtap="bindGetUserInfo">
        <view class="nickname">{{isuser ? userinfo.nickname : '登录/注册>'}}</view>
        <!-- 评价分 小红花 -->
        <view class="user-rating">
          <view class="rating-stars">
            <image wx:for="{{ratingStars}}" wx:key="index" src="{{item}}" class="star-icon"></image>
          </view>
          <text class="rating-score">{{rating}}</text>
        </view>
        <view class="user-meta-row">
          <text class="login-days">连续登录{{loginDays}}天</text>
          <view class="verify-tag {{isVerified ? 'verified' : 'unverified'}}">{{isVerified ? '已实名' : '未实名'}}</view>
        </view>
        <view class="resume-entry" bindtap="toMyNote">我的简历 ></view>
      </view>
    </view>

    <view class="asset-bar">
      <view class="asset-left">
        <image src="../../imgs/icon/my_redpack.png" class="asset-icon"></image>
        <text class="asset-label">积分</text>
        <text class="asset-value">{{pointBalance}}</text>
        <text class="asset-unit">个</text>
      </view>
      <view class="asset-right">
        <view class="asset-btn" bindtap="toRecommend">推荐</view>
        <view class="asset-btn asset-btn-outline" bindtap="toExchange">兑换</view>
      </view>
    </view>
  </view>

  <!-- 功能网格 4列x1行 -->
  <view class="func-grid">
    <view class="func-item" bindtap="toMyFind" data-id="-1">
      <image src="../../imgs/icon/my_signup.png"></image>
      <text>我的报名</text>
    </view>
    <view class="func-item" bindtap="toMySave">
      <image src="../../imgs/icon/my_fav.png"></image>
      <text>收藏</text>
    </view>
    <view class="func-item" bindtap="toChatList">
      <image src="../../imgs/icon/my_groupchat.png"></image>
      <text>我的群聊</text>
    </view>
  </view>

  <!-- 间隔 -->
  <view class="section-gap"></view>

  <!-- 菜单列表 -->
  <view class="menu-list">
    <view class="menu-item" bindtap="toAgreement">
      <image src="../../imgs/icon/menu_agreement.png" class="menu-icon"></image>
      <text class="menu-text">用户协议</text>
      <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
    </view>
    <view class="menu-item" bindtap="toPrivacy">
      <image src="../../imgs/icon/menu_privacy.png" class="menu-icon"></image>
      <text class="menu-text">隐私协议</text>
      <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
    </view>
    <view class="menu-item" bindtap="toCooperate">
      <image src="../../imgs/icon/menu_cooperate.png" class="menu-icon"></image>
      <text class="menu-text">找我合作</text>
      <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
    </view>
    <view class="menu-item">
      <button open-type="contact" class="menu-contact-btn">
        <image src="../../imgs/icon/menu_service.png" class="menu-icon"></image>
        <text class="menu-text">联系客服</text>
        <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
      </button>
    </view>
    <view class="menu-item" bindtap="toAccountSecurity">
      <image src="../../imgs/icon/manage.png" class="menu-icon"></image>
      <text class="menu-text">账号与安全</text>
      <image src="../../imgs/icon/arrow@grey.png" class="menu-arrow"></image>
    </view>
  </view>

  <!-- 间隔 -->
  <view class="section-gap"></view>

  <!-- 退出登录 -->
  <view class="logout-section">
    <view class="logout-btn" bindtap="logout">退出登录</view>
  </view>

</view>

</view>


<view class="cu-bar tabbar foot bg-white">
    <view class="action text-gray" bindtap="toIndex">
      <view class="cuIcon-homefill"></view> 首页
    </view>
    <view class="action text-gray" bindtap="toFindjob">
      <view class="cuIcon-similar"></view> {{checkFlag == 1 ? '找工作' : '找活'}}
    </view>
    <view class="action text-gray add-action"  bindtap="toMyinvate">
      <button class="cu-btn cuIcon-add bg-red shadow"></button>
       发布
    </view>


    <view class="action text-gray" bindtap="toSysmsg">
      <view class="cuIcon-notice">
      </view>
      {{checkFlag == 1 ? '消息中心' : '消息'}}
    </view>
    <view class="action text-blue" bindtap="toMyuser">
      <view class="cuIcon-my">
      </view>
      我的
    </view>
  </view>
